<html>
<head>
    <meta content='text/html;charset=UTF-8' http-equiv='Content-Type'>
    <title>scrollPagination+</title>
    <script src="jquery.js" type="text/javascript"></script>
    <script src="scrollpagination.js" type="text/javascript"></script>
    <script type="text/javascript">
      $(function(){
        $('#container').scrollPagination({
            url: 'http://api.flickr.com/services/rest/?jsoncallback=?',

            contentData: { 
              page: 1,
              format: 'json',
              sort: 'random',
              method: 'flickr.photos.search',
              tags: 'nature,kamchatka',
              tag_mode: 'all',
              api_key: '66c61b93c4723c7c3a3c519728eac252',
              per_page: 4
            },
            type: 'GET',
            dataType: 'jsonp',
            offset: 'page', // Name of offset param in URL
            contentTarget: $('#content'), // New items will be added to this block
            scrollTarget: $('#container'), // Container with scroll, it keeps contentTarget div too.
            heightOffset: 10, // Pixels from bottom of scroll to initiate request of new content
            // Getting content and rendering html 
            render: function(response) {
              var markup = "";

              $(response.photos.photo).each(function(key, photo) {
                  t_url = "http://farm" + photo.farm +
                   ".static.flickr.com/" + photo.server + "/" +
                   photo.id + "_" + photo.secret + "_" + "m.jpg";                  


                   markup +=  '<img alt="'+ photo.title + '"src="' + t_url + '"/>'  ;
              })

              return markup;
            },
            // Returns number of elements to increment offset for next request
            getNumberElements: function() {
              return 1;
            }
        });                
      });
    </script>
    <style type="text/css">
      #content img {
        margin: 5px;
      }
    </style>
</head>
<body>

<div id="container" style="width: 600px; height: 200px; background-color: gray; overflow-y: scroll;">
  <div id="content">
  </div>
</div>

</body>
</html>
